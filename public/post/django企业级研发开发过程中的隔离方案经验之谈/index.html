<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sweet House</title><meta name="description" content="之前的工作环境中，由于系统的整体性过于强，尤其是对于面向企业级客户的单机项目中，解耦合程度不高的情况下，我们无法让多位开发人员共享一台开发环境，导致最终造成开发效率低下和开发成本过高，对于这个问题我也思考了很久，后来整理了一些自己的看法和方式，形成了下面的文章，算是面向以前的经验和教训"><meta name="author" content="[Ryuchen WangOO]">


    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css">
    



    
        
            <link rel="stylesheet" href="/dist/main.37ab3f61b95417873748.min.css">
        
    




<link rel="canonical" href="http://ryuchen.club/post/django%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%A0%94%E5%8F%91%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%9A%94%E7%A6%BB%E6%96%B9%E6%A1%88%E7%BB%8F%E9%AA%8C%E4%B9%8B%E8%B0%88/"><meta property="og:title" content="Django 企业级研发开发过程中的隔离方案（经验之谈）" />
<meta property="og:description" content="之前的工作环境中，由于系统的整体性过于强，尤其是对于面向企业级客户的单机项目中，解耦合程度不高的情况下，我们无法让多位开发人员共享一台开发环境，导致最终造成开发效率低下和开发成本过高，对于这个问题我也思考了很久，后来整理了一些自己的看法和方式，形成了下面的文章，算是面向以前的经验和教训" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://ryuchen.club/post/django%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%A0%94%E5%8F%91%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E9%9A%94%E7%A6%BB%E6%96%B9%E6%A1%88%E7%BB%8F%E9%AA%8C%E4%B9%8B%E8%B0%88/" />
<meta property="og:image" content="http://ryuchen.club/markdown-syntax.jpg" />

<meta itemprop="name" content="Django 企业级研发开发过程中的隔离方案（经验之谈）">
<meta itemprop="description" content="之前的工作环境中，由于系统的整体性过于强，尤其是对于面向企业级客户的单机项目中，解耦合程度不高的情况下，我们无法让多位开发人员共享一台开发环境，导致最终造成开发效率低下和开发成本过高，对于这个问题我也思考了很久，后来整理了一些自己的看法和方式，形成了下面的文章，算是面向以前的经验和教训">

<meta itemprop="wordCount" content="154">
<meta itemprop="image" content="http://ryuchen.club/markdown-syntax.jpg">



<meta itemprop="keywords" content="django," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://ryuchen.club/markdown-syntax.jpg"/>

<meta name="twitter:title" content="Django 企业级研发开发过程中的隔离方案（经验之谈）"/>
<meta name="twitter:description" content="之前的工作环境中，由于系统的整体性过于强，尤其是对于面向企业级客户的单机项目中，解耦合程度不高的情况下，我们无法让多位开发人员共享一台开发环境，导致最终造成开发效率低下和开发成本过高，对于这个问题我也思考了很久，后来整理了一些自己的看法和方式，形成了下面的文章，算是面向以前的经验和教训"/>

</head>
<body>
    
<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top shadow-sm" id="navbar-main-menu">
    <div class="container">
        <a class="navbar-brand font-weight-bold" href="http://ryuchen.club">Sweet House</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main-menu">
            <ul class="navbar-nav ml-auto">
                
                    <li class="nav-item"><a class="nav-link" href="/">首页</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/dairy/">日记</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/board/">黑板</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/authors/">我们</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/gallery/">照片墙</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/404/">寻找</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/about/">关于</a></li>
                
            
            </ul>
        </div>
    </div>
</nav>


    
<main class="content-page container pt-7 pb-5">
    
    <div class="row">
        <div class="col">
            <article>
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="meta text-muted mb-3">
                            <p class="created text-muted text-uppercase font-weight-bold mb-1">January 1, 0001</p>
                            <span class="mr-2"><i class="fas fa-book-open mr-2"></i></span>
                            <span><i class="fas fa-clock mr-2"></i></span>
                        </div>

                        <h1>Django 企业级研发开发过程中的隔离方案（经验之谈）</h1>

                        
                    </div>
                </div><div class="row justify-content-center mb-3">
                                <div class="col-lg-10">
                                    <img data-src="/images/markdown-syntax_hu9d0b46ff016e885d1678cd94c2d23ea6_42965_900x500_fit_q75_box.jpg" class="img-fluid rounded mx-auto d-block" alt="Django 企业级研发开发过程中的隔离方案（经验之谈）">
                                </div>
                            </div><div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="content">
                            <p>之前的工作环境中，由于系统的整体性过于强，尤其是对于面向企业级客户的单机项目中，解耦合程度不高的情况下，我们无法让多位开发人员共享一台开发环境，导致最终造成开发效率低下和开发成本过高，对于这个问题我也思考了很久，后来整理了一些自己的看法和方式，形成了下面的文章，算是面向以前的经验和教训</p>
<h2 id="django-企业级研发开发过程中的隔离方案经验之谈">Django 企业级研发开发过程中的隔离方案（经验之谈）</h2>
<h3 id="开发人员目前遇到的问题">开发人员目前遇到的问题</h3>
<p>公司目前在使用django-rest-framework构建产品的API平台，这样在后续前端业务迭代过程中就会方便很多。但是随之而来的问题是当有多个人进行开发后台平台的时候，由于之前的产品设计中各组件的解耦不够彻底，导致作为API平台的django层无法顺利的运行在开发机器中，于是需要重新设计整个开发的过程，帮助开发人员在配置环境，提交代码中很顺利的调试，测试自己所写的代码有效的降低代码出现bug的几率。</p>
<h3 id="使用多层继承的方式进行配置隔离">使用多层继承的方式进行配置隔离</h3>
<p>原先的django项目中我们使用的是 <code>proj/settings.py</code> 进行项目的配置，后续因为牵扯的组件太多，导致配置文件一度达到几百行，虽说很多配置项都是固定的，在后续开发、部署中都不需要牵扯太多的精力在其中，但是过多、过长的配置文件仍然对我们梳理开发环境构成了一定的问题。后续面对散乱的配置项，无论是想修改什么多会令人头大，稍有不慎肯定会对已经稳定运行的代码构成风险，造成难以发现的bug。</p>
<p>后续为了避免这样的问题出现，我们将配置项拆分成了如下结构</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">proj<span style="color:#f92672">/</span>
    <span style="color:#f92672">|--</span>settings<span style="color:#f92672">/</span>
            <span style="color:#f92672">|--</span> __init__<span style="color:#f92672">.</span>py 
            <span style="color:#f92672">|--</span> base<span style="color:#f92672">.</span>py            <span style="color:#75715e"># django自身配置项</span>
            <span style="color:#f92672">|--</span> celerys<span style="color:#f92672">.</span>py       <span style="color:#75715e"># django集成的celery的配置项 </span>
            <span style="color:#f92672">|--</span> context<span style="color:#f92672">.</span>py      <span style="color:#75715e"># 影响全局上下文的组件对接配置项</span>
            <span style="color:#f92672">|--</span> defines<span style="color:#f92672">.</span>py      <span style="color:#75715e"># 定义的全局静态配置项</span>
</code></pre></div><p>构建了上述的这种结构，我们就可以在后续修改中有效的管理起我们的配置项。按照每一层的结构说明，我们归纳好我们的现有配置项，然后逐层引用，这样最终在<code>__init__.py</code>文件中只需要引用 <code>defines.py</code> 中的所有配置项就可以起到跟之前的一样的效果，并且不影响我们之前的代码使用，已有代码中针对settings的引用依旧生效不会影响使用。</p>
<h3 id="使用django-environ做环境隔离">使用django-environ做环境隔离</h3>
<p>当拆分开我们的项目中的配置项之后，我们需要修改的就是针对于不同的环境中所用到的环境配置不同的问题。</p>
<p>举个简单的例子，目前这个阶段公司的项目中很多地方在生成路径时都使用了配置中的绝对路径，这样在后续过程中会导致我们在进行开发时无法在自己的开发环境中运行前端项目，必须手工的在系统中创建对应的路径。这种情况针对开发者本身是十分不友好的，如果我们有后续进入开发团队的伙伴，进行开发，需要很长的周期才能进入正式的功能性开发，其中配置环境就将占用大部分的时间。</p>
<p>此外上述的例子是说的当我们面对项目可以单独运行的时候，但是代码较为死板的情况。更可怕的是我们公司目前的项目无法单独的进行运行，必须依赖其他的项目接口和很多基础环境，这样在开发人员进行开发的时候则必须进入一个完整的开发平台，部署完整的真实环境。这种情况是一定不可接受的，因为我们在开发中必然会遇到冲突、覆盖的问题，最终导致开发的过程十分不顺利，这种情况必须做到环境的隔离。</p>
<p>后续为了进一步避免这样的问题出现，我们将配置项中针对于环境的设置进一步拆分了如下结构</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#960050;background-color:#1e0010">使用</span>django<span style="color:#f92672">-</span>environ进行环境隔离的时候<span style="color:#960050;background-color:#1e0010">，开发目录如下</span>

proj<span style="color:#f92672">/</span>
    <span style="color:#f92672">|--.</span>environ<span style="color:#f92672">/</span>
            <span style="color:#f92672">|--.</span>env<span style="color:#f92672">.</span>release    <span style="color:#75715e"># 针对于发布环境</span>
            <span style="color:#f92672">|--.</span>env<span style="color:#f92672">.</span>develop   <span style="color:#75715e"># 针对于开发环境</span>
            <span style="color:#f92672">|--.</span>env<span style="color:#f92672">.</span>testing     <span style="color:#75715e"># 针对于测试环境</span>
    <span style="color:#f92672">|--</span>settings<span style="color:#f92672">/</span>
            <span style="color:#f92672">|--</span> __init__<span style="color:#f92672">.</span>py
            <span style="color:#f92672">|--</span> base<span style="color:#f92672">.</span>py
            <span style="color:#f92672">|--</span> celerys<span style="color:#f92672">.</span>py
            <span style="color:#f92672">|--</span> context<span style="color:#f92672">.</span>py
            <span style="color:#f92672">|--</span> defines<span style="color:#f92672">.</span>py

<span style="color:#960050;background-color:#1e0010">并将通过这个组件对</span>base<span style="color:#f92672">.</span>py中的环境引用使用了全新的方式

env <span style="color:#f92672">=</span> environ<span style="color:#f92672">.</span>Env(
    DEBUG<span style="color:#f92672">=</span>(bool, False),
    SECRET_KEY<span style="color:#f92672">=</span>str,
    BASE_HOST<span style="color:#f92672">=</span>str,
    DATABASE_NAME<span style="color:#f92672">=</span>str,
    DATABASE_USER<span style="color:#f92672">=</span>str,
    DATABASE_PASS<span style="color:#f92672">=</span>str,
    STORAGE_PATH_PREFIX<span style="color:#f92672">=</span>str,
    OEM_CONFIG_PATH<span style="color:#f92672">=</span>str
)

env<span style="color:#f92672">.</span>read_env(env_file<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(BASE_DIR, <span style="color:#e6db74">&#39;web&#39;</span>, <span style="color:#e6db74">&#39;.environ&#39;</span>, <span style="color:#e6db74">&#39;.env.</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">%</span> env<span style="color:#f92672">.</span>str(<span style="color:#e6db74">&#39;PROJECT_ENV&#39;</span>, <span style="color:#e6db74">&#39;release&#39;</span>)))

<span style="color:#75715e"># Quick-start development settings - unsuitable for production</span>
<span style="color:#75715e"># See https://docs.djangoproject.com/en/1.9/howto/deployment/checklist/</span>

<span style="color:#75715e"># SECURITY WARNING: keep the secret key used in production secret!</span>
SECRET_KEY <span style="color:#f92672">=</span> env(<span style="color:#e6db74">&#39;SECRET_KEY&#39;</span>)

<span style="color:#75715e"># SECURITY WARNING: don&#39;t run with debug turned on in production!</span>
DEBUG <span style="color:#f92672">=</span> env(<span style="color:#e6db74">&#39;DEBUG&#39;</span>)

<span style="color:#960050;background-color:#1e0010">其中引入了一个</span> PROJECT_ENV <span style="color:#960050;background-color:#1e0010">作为系统环境变量，这样就可以在启动</span>django服务的时候通过修改全局的变量环境构成 <span style="color:#960050;background-color:#1e0010">针对不同的环境所打造代码运行环境</span>
</code></pre></div><p>这样在后续的开发中我们将直面的一些环境问题也能够做好处理</p>
<h3 id="开发基础虚拟环境的服务隔离">开发基础虚拟环境的服务隔离</h3>
<p>此前公司中一直是分配真实开发机器给前端作为开发机器，这种情况下多个人在同一台开发机中容易造成拥堵，无法进行有效的并行开发，后续急需通过其他方式进行修改，将大家的开发环境进行有效的隔离，然后将数据方面进行有效的控制管理。</p>
<p>我们曾尝试过使用PVE作为我们公司内部的开发环境进行开发隔离处理，但是后续因为每个人都需要进行部署整套产品服务，造成很大程度上资源的不必要的浪费（单独产品必须64G才能运行，其中基础服务组件就占去了将近三分之二的资源）</p>
<p>后续为了彻底改善开发的基础环境问题我们将开发环境拆分成了如下配置</p>
<pre><code class="language-mermaid" data-lang="mermaid">graph LR
    A --&gt; B(基础环境)
    B --&gt; C(单机开发环境A)
    B --&gt; D(单机开发环境B)
    C --&gt; E(开发者A)
    C --&gt; F(开发者B)
    D --&gt; E(开发者A)
    D --&gt; F(开发者B)
</code></pre><p>通过有效的将组件的解耦和合理拆分，我们将构建专门的一台流量拆分的机器，这台机器中将部属公司内部的流量机器，它将部署流量检测组件，通过自己给自己回放流量，将最终的数据输出到基础环境中；然后基础环境中部署公司的数据库组件等一系列其他的基础组件，并将接口暴露出来；然后分配两台独立的开发机器，将机器中的接口配置都引导向基础环境中，这样在产品内部的开发者将有效的通过任务的隔离选择合适的开发环境进行开发。</p>
                        </div><div class="tags my-3"><a class="badge badge-pill badge-light border mr-2" href="/tags/django">
                                    <i class="fas fa-tag mr-2"></i>django
                                </a></div><ul class="share nav my-3 justify-content-end">
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://twitter.com/intent/tweet?url=http%3a%2f%2fryuchen.club%2fpost%2fdjango%25E4%25BC%2581%25E4%25B8%259A%25E7%25BA%25A7%25E7%25A0%2594%25E5%258F%2591%25E5%25BC%2580%25E5%258F%2591%25E8%25BF%2587%25E7%25A8%258B%25E4%25B8%25AD%25E7%259A%2584%25E9%259A%2594%25E7%25A6%25BB%25E6%2596%25B9%25E6%25A1%2588%25E7%25BB%258F%25E9%25AA%258C%25E4%25B9%258B%25E8%25B0%2588%2f&text=Django%20%e4%bc%81%e4%b8%9a%e7%ba%a7%e7%a0%94%e5%8f%91%e5%bc%80%e5%8f%91%e8%bf%87%e7%a8%8b%e4%b8%ad%e7%9a%84%e9%9a%94%e7%a6%bb%e6%96%b9%e6%a1%88%ef%bc%88%e7%bb%8f%e9%aa%8c%e4%b9%8b%e8%b0%88%ef%bc%89">
              <i class="fa-fw fab fa-twitter"></i>
          </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://www.linkedin.com/shareArticle?url=http%3a%2f%2fryuchen.club%2fpost%2fdjango%25E4%25BC%2581%25E4%25B8%259A%25E7%25BA%25A7%25E7%25A0%2594%25E5%258F%2591%25E5%25BC%2580%25E5%258F%2591%25E8%25BF%2587%25E7%25A8%258B%25E4%25B8%25AD%25E7%259A%2584%25E9%259A%2594%25E7%25A6%25BB%25E6%2596%25B9%25E6%25A1%2588%25E7%25BB%258F%25E9%25AA%258C%25E4%25B9%258B%25E8%25B0%2588%2f&title=Django%20%e4%bc%81%e4%b8%9a%e7%ba%a7%e7%a0%94%e5%8f%91%e5%bc%80%e5%8f%91%e8%bf%87%e7%a8%8b%e4%b8%ad%e7%9a%84%e9%9a%94%e7%a6%bb%e6%96%b9%e6%a1%88%ef%bc%88%e7%bb%8f%e9%aa%8c%e4%b9%8b%e8%b0%88%ef%bc%89">
                <i class="fa-fw fab fa-linkedin-in"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://www.facebook.com/sharer.php?u=http%3a%2f%2fryuchen.club%2fpost%2fdjango%25E4%25BC%2581%25E4%25B8%259A%25E7%25BA%25A7%25E7%25A0%2594%25E5%258F%2591%25E5%25BC%2580%25E5%258F%2591%25E8%25BF%2587%25E7%25A8%258B%25E4%25B8%25AD%25E7%259A%2584%25E9%259A%2594%25E7%25A6%25BB%25E6%2596%25B9%25E6%25A1%2588%25E7%25BB%258F%25E9%25AA%258C%25E4%25B9%258B%25E8%25B0%2588%2f&t=Django%20%e4%bc%81%e4%b8%9a%e7%ba%a7%e7%a0%94%e5%8f%91%e5%bc%80%e5%8f%91%e8%bf%87%e7%a8%8b%e4%b8%ad%e7%9a%84%e9%9a%94%e7%a6%bb%e6%96%b9%e6%a1%88%ef%bc%88%e7%bb%8f%e9%aa%8c%e4%b9%8b%e8%b0%88%ef%bc%89">
                <i class="fa-fw fab fa-facebook-f"></i>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" target="_blank" href="https://reddit.com/submit?url=http%3a%2f%2fryuchen.club%2fpost%2fdjango%25E4%25BC%2581%25E4%25B8%259A%25E7%25BA%25A7%25E7%25A0%2594%25E5%258F%2591%25E5%25BC%2580%25E5%258F%2591%25E8%25BF%2587%25E7%25A8%258B%25E4%25B8%25AD%25E7%259A%2584%25E9%259A%2594%25E7%25A6%25BB%25E6%2596%25B9%25E6%25A1%2588%25E7%25BB%258F%25E9%25AA%258C%25E4%25B9%258B%25E8%25B0%2588%2f&title=Django%20%e4%bc%81%e4%b8%9a%e7%ba%a7%e7%a0%94%e5%8f%91%e5%bc%80%e5%8f%91%e8%bf%87%e7%a8%8b%e4%b8%ad%e7%9a%84%e9%9a%94%e7%a6%bb%e6%96%b9%e6%a1%88%ef%bc%88%e7%bb%8f%e9%aa%8c%e4%b9%8b%e8%b0%88%ef%bc%89">
                <i class="fa-fw fab fa-reddit-alien"></i>
            </a>
        </li>
    </nav>
                    </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        
                    </div>
                </div><div class="row justify-content-center my-3">
                    <div class="col-lg-8">
                        <div id="commento"></div>
                        <script src="https://commento.io"></script>
                    </div>
                </div></article>
        </div>
    </div>

    <div class="related-content row mt-5 row-cols-1 row-cols-lg-3"><div class="col mb-3">
                <div class="card h-100">
    
    <a href="/post/django-%E4%B8%8E-ant-design-vue-%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8/" class="d-block"><img data-src="/images/markdown-syntax_hu9d0b46ff016e885d1678cd94c2d23ea6_42965_700x350_resize_q75_box.jpg" class="card-img-top mx-auto d-block" alt="Django 与 Ant Design Vue 结合使用"><div class="card-body">
            <h4 class="card-title">Django 与 Ant Design Vue 结合使用</h4>
            <p class="card-text text-muted text-uppercase">August 12, 2019</p>
            <div class="card-text">
                基于上一次编写 django admin 应用的时候使用 simpleui 的经验，结合之前的 django 开发经验，准备自己着手写一套可以扩展的方便使用的 admin theme，结合之前熟悉的 vue 和 ant design 组件库的样式比较喜欢，所以打算基于这个去开发，下面将介绍我在实践过程中所遇到的问题和如何解决~

            </div>
        </div>
    </a>
</div>

            </div><div class="col mb-3">
                <div class="card h-100">
    
    <a href="/post/%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%AD%A6%E6%A0%A1%E5%B0%8F%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%80%BB%E7%BB%93/" class="d-block"><img data-src="/images/markdown-syntax_hu9d0b46ff016e885d1678cd94c2d23ea6_42965_700x350_resize_q75_box.jpg" class="card-img-top mx-auto d-block" alt="django-admin 实现的学校小项目的总结"><div class="card-body">
            <h4 class="card-title">django-admin 实现的学校小项目的总结</h4>
            <p class="card-text text-muted text-uppercase">August 2, 2019</p>
            <div class="card-text">
                这个项目起始是因为学校之前的老师找到我，说让我帮忙弄个进行管理基本管理数据的小工具，听起来也并不是很难（然而，后期我一直在搞这个，深陷其中不可自拔），于是痛快的答应下来，后续就一直在弄这个小平台了~

            </div>
        </div>
    </a>
</div>

            </div><div class="col mb-3">
                <div class="card h-100">
    
    <a href="/post/django%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E7%90%86%E8%A7%A3%E9%92%88%E5%AF%B9%E5%B7%B2%E6%9C%89%E7%BB%8F%E9%AA%8C/" class="d-block"><img data-src="/images/markdown-syntax_hu9d0b46ff016e885d1678cd94c2d23ea6_42965_700x350_resize_q75_box.jpg" class="card-img-top mx-auto d-block" alt="Django中间件的理解『针对已有经验』"><div class="card-body">
            <h4 class="card-title">Django中间件的理解『针对已有经验』</h4>
            <p class="card-text text-muted text-uppercase">January 1, 0001</p>
            <div class="card-text">
                这篇文章的主要目的是帮助自己总结下过去使用 django 中间件中发生的问题的时候，需要进行注意的地方，那是在一次审查 django 在接收前端请求过程中过慢的问题，后续发现是中间件中频繁对文本资源进行读取，而且还通过递归的方式进行了文件的遍历，造成效率的低下，于是总结了一下经验。

            </div>
        </div>
    </a>
</div>

            </div></div>
</main>


    <footer class="footer text-center bg-dark py-6">
    <div class="container">
        <div class="row">
            <div class="col">
                <ul class="list-inline">
                    <li class="list-inline-item"><a href="http://ryuchen.club/index.xml" rel="alternate" type="application/rss+xml" class="icons d-block">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a></li><li class="list-inline-item">
                        <a href="mailto://example@example.com" class="icons d-block">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li><li class="list-inline-item">
                            <a href="https://facebook.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://github.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://gitlab.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://stackoverflow.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://keybase.io/" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-keybase fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://linkedin.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://mastodon.social" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-mastodon fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://medium.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-medium fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://pinterest.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-pinterest fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://reddit.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-reddit fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://stackoverflow.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://twitter.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li><li class="list-inline-item">
                            <a href="https://www.weibo.com" class="icons d-block">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fab fa-weibo fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                </ul>

                <p class="text-muted">
                    
                        Copyright © 2018–2020, WangOO and Ryuchen; all rights reserved.
                    
                </p>

                <p class="text-muted">
                Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with <a href="https://github.com/puresyntax71/hugo-theme-chunky-poster" target="_blank">Chunky Poster</a>.
                </p>
            </div>
        </div>
    </div>
</footer>

    
    
        
            <script src="/dist/main.2ed44664366c9940537d.min.js"></script>
        
    



<script>
    window.Prism = window.Prism || {};
    window.Prism.manual = true;
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/plugins/autoloader/prism-autoloader.min.js"></script>






    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-XXXX', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>
